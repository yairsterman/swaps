<div class="travelers-page">
    <div class="filters {{showFilters?'show-filters':''}}">
        <button class="filter-button date-button {{filter.when?'active':''}}">
            <i class="fa fa-times" ng-click="removeDates()" ng-if="filter.when"></i>
            <div class="filter-dates" ng-model="filter.date" id="searchDate" name="searchDate" ng-model="filter.date" swap-dates="filter" locale-format="localeFormat" model-format="modelFormat" find-travel="false" datepicker>
                <div class="icon icon-calender" ></div>
                {{filter.when?filter.date:'Dates'}}
                <span class="flexible-departure">{{filter.rangeLabel === 'Weekends'?'Weekends':''}}</span>
            </div>
            <!--<div class="">-->
                <!--<div class="dropdown">-->
                    <!--<div class="flexible-dates" data-toggle="dropdown" ng-if="filter.rangeLabel">-->
                        <!--{{filter.rangeLabel === 'Weekends'? data.weekendStart[filter.startRange].value +'-'+data.weekendEnd[filter.endRange].value :filter.rangeLabel === 'Date Range'?(filter.startRange != filter.endRange?filter.startRange +'-'+ filter.endRange:filter.startRange) + ' Nights': ''}}-->
                        <!--<span class="glyphicon glyphicon-chevron-down"></span>-->
                    <!--</div>-->
                    <!--<div class="dropdown-menu flexible-dropdown" ng-if="filter.rangeLabel">-->
                        <!--<form name="rangeForm" class="range-wr" novalidate>-->
                            <!--<div ng-if="filter.rangeLabel === 'Weekends'" class="flex">-->
                                <!--<div class="flex flex-row">-->
                                    <!--<label class="flexible-label">Departure: </label>-->
                                    <!--<select ng-model="filter.startRange" class="form-control" ng-change="getPage(1)" ng-disabled="loading">-->
                                        <!--<option ng-repeat="x in data.weekendStart" value="{{x.id}}">{{x.value}}</option>-->
                                    <!--</select>-->
                                <!--</div>-->
                                <!--<div class="flex flex-row">-->
                                    <!--<label class="flexible-label">Return: </label>-->
                                    <!--<select ng-model="filter.endRange" class="form-control" ng-change="getPage(1)" ng-disabled="loading">-->
                                        <!--<option ng-repeat="x in data.weekendEnd" value="{{x.id}}">{{x.value}}</option>-->
                                    <!--</select>-->
                                <!--</div>-->
                            <!--</div>-->
                            <!--<div ng-if="filter.rangeLabel === 'Date Range'" class="duration-wr">-->
                                <!--<div class="no-padding col-xs-12">-->
                                    <!--<div class="checkbox-wrapper">-->
                                        <!--<div class="single-checkbox">-->
                                            <!--<div class="things-checkbox" ng-click="setExactDates(swap)">-->
                                                <!--<div class="check icon icon-check {{exactDates?'checked':''}}"></div>-->
                                            <!--</div>-->
                                            <!--<div class="text">-->
                                                <!--Exact Dates-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <!--<div class="single-checkbox">-->
                                            <!--<div class="things-checkbox" ng-click="setExactDates(swap)">-->
                                                <!--<div class="check icon icon-check {{!exactDates?'checked':''}}"></div>-->
                                            <!--</div>-->
                                            <!--<div class="text">-->
                                                <!--<label class="flexible-label">Duration: </label>-->
                                                <!--<input type="text" class="form-control" placeholder="{{minNightsRange}}-{{maxNightsRange}}" name="durationRange" ng-model="filter.duration" ng-change="changeRange(filter)">-->
                                                <!--<span class="nights">Nights</span>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->
                        <!--</form>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        </button>
        <div class="dropdown travelers-dropdown" uib-dropdown>
            <button class="filter-button dropdown-toggle {{filter.guests?'active':''}}" id="travelers" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <div class="icon icon-man-small" ></div>
                {{filter.guests}} {{filter.guests>1?'Travelers':'Traveler'}}
            </button>
            <div class="dropdown-menu" uib-dropdown-menu  aria-labelledby="travelers">
                <div class="travelers-search">
                    <div class="search-field filter col-xs-5">
                        <input type="number" class="form-control guests" id="guests" placeholder="1" ng-model="filter.guests" min="1" max="8">
                    </div>
                    <div class="apply col-xs-7">
                        <input type="button" class="btn-primary btn-apply" value="Apply" ng-click="appliedFilters=true;getPage(1)" ng-disabled="loading">
                    </div>
                </div>
            </div>
        </div>
        <div class="dropdown">
            <button class="filter-button dropdown-toggle {{checkedRoomTypes.length > 0?'active':''}}" type="button" id="filterRoom" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fa fa-times" ng-click="removeRoomTypes()" ng-if="checkedRoomTypes.length > 0"></i>
                <div class="icon icon-door-small"></div>
                Room Type
            </button>
            <div class="dropdown-menu" aria-labelledby="filterAmenities" ng-click="$event.stopPropagation()">
                <div class="room-type">
                    <div class="filter {{loading?'disabled':''}} " ng-repeat="room in data.roomType">
                        <div class="filter-checkbox" ng-click="checkRoomType(room.id, $event)">
                            <div class="check icon icon-check {{isCheckedRoomType(room.id)?'checked':''}}"></div>
                        </div>
                        <div>
                            {{room.displayName}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="dropdown no-position">
            <button class="filter-button dropdown-toggle facilities {{checkedAmenities.length > 0?'active':''}}" type="button" id="filterAmenities" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fa fa-times" ng-click="removeFacilities()" ng-if="checkedAmenities.length > 0"></i>
                <div class="icon icon-TV"></div>
                Facilities
            </button>
            <div class="dropdown-menu amenities-dropdown" aria-labelledby="filterAmenities" ng-click="$event.stopPropagation()">
                <div class="row mg-0 amenities">
                    <div class="filter {{loading?'disabled':''}} col-sm-6 col-xs-6" ng-repeat="amenity in data.amenities">
                        <div class="filter-checkbox" ng-click="checkAmenity(amenity.id, $event)">
                            <div class="check icon icon-check {{isCheckedAmenity(amenity.id)?'checked':''}}"></div>
                        </div>
                        <div>
                            {{amenity.displayName}}
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="toggle-filters visible-xs" ng-click="toggleFilters()">{{showFilters?'Hide':'Show'}} Filters</div>
    <div class="people-and-map">
        <div class="">
            <div class="row mg-0">
                <div class="travelers-list col-md-8 col-sm-12" id="swappers" scroll-action="" action="openHelpSearch()">
                    <div class="loader-container {{loading?'':'disappear'}}" >
                        <div class="cssload-loader">
                            <div class="cssload-inner cssload-one"></div>
                            <div class="cssload-inner cssload-two"></div>
                            <div class="cssload-inner cssload-three"></div>
                        </div>
                    </div>
                    <div class="mg-0 row" ng-if="!loading">
                        <div class="title" ng-if="exactMatchesLength === 0 && !(travelers.length === 0 && !failedCity)">
                            Sorry we couldn't find a home in {{city}}, <br>try widening your search
                        </div>
                        <div class="traveler-col col-sm-6 col-xs-12" ng-repeat="traveler in travelers | limitTo: exactMatchesLimit" id="{{traveler._id}}" ng-mouseover="scaleImage(traveler.image)" ng-mouseleave="shrinkImage(traveler.image)">
                              <swapper-home traveler="traveler"></swapper-home>
                        </div>
                        <div class= "traveler-col col-sm-12" ng-if="exactMatchesLength != totalUsers && pageSize * (page + 1) - exactMatchesLength <= pageSize && pageSize * (page + 1) - exactMatchesLength > 0">
                            <div class="other-homes">
                                Other homes that might interest you
                                <div class="underline">
                                </div>
                            </div>
                        </div>
                        <div class= "traveler-col col-sm-6 col-xs-12" ng-if="exactMatchesLength != totalUsers && pageSize * (page + 1) - exactMatchesLength <= pageSize" ng-repeat="traveler in travelers | limitTo: pageSize: exactMatchesLimit" id="{{traveler._id}}" ng-mouseover="scaleImage(traveler.image)" ng-mouseleave="shrinkImage(traveler.image)">
                            <swapper-home traveler="traveler"></swapper-home>
                        </div>
                        <div class="title" ng-if="travelers.length === 0 && !failedCity">
                            Sorry we couldn't find a home with these specific filters, <br>try widening your search
                        </div>
                    </div>
                    <div class="traveler-pagination" ng-if="!loading && totalUsers >= pageSize">
                        <paging
                                page="currentPage"
                                page-size="pageSize"
                                total="totalUsers"
                                paging-action="getPage(page)"
                                show-prev-next="true"
                                adjacent="1"
                                li-class="{{totalUsers}}"
                                text-next-class="glyphicon glyphicon-chevron-right"
                                text-prev-class="glyphicon glyphicon-chevron-left">
                        </paging>
                    </div>
                </div>
                <!--------------------------------------------------MAP SECTION--------------------------------------------->
                <div class="map-view col-md-4 col-xs-12 hidden-xs" style="overflow-x: hidden;">
                    <div class="map" id="travelerMap"></div>
                </div>
            </div>
                <!--<div class="row">-->
                    <!--<div class="travelers-result-pages col-xs-12 col-sm-12 col-md-12 col-lg-12" ng-init="pageList = pageListToShow(1, dumPageCount(dum_trav))">-->
                        <!--<ul class="page-list" ng-if="isPageListShort(dum_trav)">-->
                            <!--<li class="page-number"-->
                                <!--ng-repeat="num in pageList track by $index">-->
                                <!--<button ng-click="goToPage(num, dum_trav)" ng-disabled="pageIndicator == num">{{num}}</button>-->
                            <!--</li>-->
                        <!--</ul>-->
                        <!--{{pageIndicator}}-->
                        <!--<ul class="page-list" ng-if="!isPageListShort(dum_trav)">-->
                            <!--<li class="page-number"-->
                                <!--ng-repeat="num in pageList track by $index">-->
                                <!--<button ng-click="goToPage(num, dum_trav)" ng-disabled="pageIndicator == num">{{num}}</button>-->
                            <!--</li>-->
                        <!--</ul>-->

                        <!--<button class="page-number prev-btn btn btn-primary" ng-click="prevPage_damir(pageIndicator, dum_trav)"-->
                                <!--ng-show="pageIndicator > 1">Prev</button>-->
                        <!--<button class="next-btn btn btn-primary" ng-click="nextPage_damir(pageIndicator, dum_trav)"-->
                                <!--ng-show="pageIndicator < pageCount(dum_trav)">Next</button>-->

                    <!--</div>-->

                <!--</div>-->
            </div>
        </div>
    </div>
</div>


